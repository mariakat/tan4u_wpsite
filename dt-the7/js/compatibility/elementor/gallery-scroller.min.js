!function(t){function e(t){var e=t.find(".dt-product-gallery"),i=t.find(".dt-product-thumbs .slides").find("li:eq(0)").find("img"),a=e.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=a.find(".wp-post-image"),n=a.find("a").eq(0);r.wc_reset_variation_attr("src"),r.wc_reset_variation_attr("width"),r.wc_reset_variation_attr("height"),r.wc_reset_variation_attr("srcset"),r.wc_reset_variation_attr("sizes"),r.wc_reset_variation_attr("title"),r.wc_reset_variation_attr("data-caption"),r.wc_reset_variation_attr("alt"),r.wc_reset_variation_attr("data-src"),r.wc_reset_variation_attr("data-large_image"),r.wc_reset_variation_attr("data-large_image_width"),r.wc_reset_variation_attr("data-large_image_height"),a.wc_reset_variation_attr("data-thumb"),i.wc_reset_variation_attr("src"),i.wc_reset_variation_attr("srcset"),i.wc_reset_variation_attr("data-src"),n.wc_reset_variation_attr("href")}t.productGallery=function(e){var i,a=t(e),r=a.find(".dt-wc-product-gallery"),n=r.find(".dt-product-thumbs"),o=r.find(".dt-product-gallery"),s=o.find(".flexslider"),d=n.find(".flexslider"),c={};a.vars={},t.data(e,"productGallery",a),c={initVars:function(){a.css("--widget-width",a.width()+"px"),a.vars.scrollMode=the7Utils.parseParam(n.attr("data-scroll-mode"),"horizontal"),a.vars.thumbGap=the7Utils.parseIntParam(a.css("--thumbs-spacing"),0),a.vars.colNum=the7Utils.parseIntParam(a.css("--thumbs-items"),3),a.vars.isVertical="vertical"===a.vars.scrollMode,a.vars.blockedRefresh=!1},init:function(){c.initVars();var e=s.find(".flex-direction-nav a"),n=the7Utils.parseParam(r.attr("data-animation"),"slide"),l="fade"===n?400:600,u=!0,m=!1;if(o.on("click",".zoom-flash",(function(t){t.preventDefault(),o.find(".woocommerce-product-gallery__trigger").trigger("click")})),o.on("click",".woocommerce-product-gallery__trigger",(function(t){void 0!==i&&i.openPhotoswipe(t)})),o.on("click",".woocommerce-product-gallery__image",(function(t){a.hasClass("lightbox-on-click-y")&&void 0!==i&&i.openPhotoswipe(t)})),a.on("woocommerce_gallery_reset_slide_position",c.onResetSlidePosition),s.find(".slides > li").length>1&&(m=!0),s.flexslider({animation:n,animationSpeed:l,controlNav:!1,animationLoop:m,slideshow:!1,customDirectionNav:e,prevText:"",nextText:"",allowOneSlide:!0,after:function(t){c.productInitZoomForCurrentSlide(t)},sync:d,init:function(t){c.productInitZoomForCurrentSlide(t),u&&d.find(".slides > li").length>1&&(u=!1,c.thumbs.init())},start:function(e){s.css("visibility","inherit"),e.find(".slides > li").length>1&&"fade"===e.vars.animation&&(namespace=e.vars.namespace,e.viewport=t('<div class="'+namespace+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(e).append(e.container))}}),void 0===v)var v={};"undefined"!=typeof dtGlobals&&dtGlobals.addOnloadEvent((function(){if("function"==typeof t.fn.wc_product_gallery){i=o.wc_product_gallery({flexslider_enabled:!1,zoom_enabled:!1,photoswipe_enabled:!0,photoswipe_options:{shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0}}).data("product_gallery")}})),t(window).on("debouncedresize",(function(){a.vars.blockedRefresh||(a.refresh(),a.vars.blockedRefresh=!1)}))},thumbs:{init:function(){a.find(".slides li img").the7ImageRatio();var e,i,r,o,l,u,m,v=n.find(".flex-direction-nav a"),f=!0;d.flexslider({animation:"slide",animationLoop:!0,controlNav:!1,customDirectionNav:v,move:1,slideshow:!1,itemWidth:100,itemMargin:a.vars.thumbGap,direction:a.vars.scrollMode,prevText:"",nextText:"",directionNav:!0,asNavFor:s,init:function(a){u=a.vars.namespace;var n=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture;e=("ontouchstart"in window||n||window.DocumentTouch&&document instanceof DocumentTouch)&&a.vars.touch,i="vertical"===a.vars.direction,r=a.vars.reverse,o=a.vars.itemWidth>0,l="fade"===a.vars.animation,m=""!==a.vars.asNavFor,f&&(f=!1,a.doMath=function(){var t=a.slides.first(),e=a.vars.itemMargin,r=a.vars.minItems,n=a.vars.maxItems;i?(a.w=void 0===a.viewport?a.height():a.viewport.height(),a.isFirefox&&(a.w=a.height()),a.h=t.width(),a.boxPadding=t.outerHeight()-t.height()):(a.w=void 0===a.viewport?a.width():a.viewport.width(),a.isFirefox&&(a.w=a.width()),a.h=t.height(),a.boxPadding=t.outerWidth()-t.width()),o?(a.itemT=a.vars.itemWidth+e,a.itemM=e,a.minW=r?r*a.itemT:a.w,a.maxW=n?n*a.itemT-e:a.w,a.itemW=a.minW>a.w?(a.w-e*(r-1))/r:a.maxW<a.w?(a.w-e*(n-1))/n:a.vars.itemWidth>a.w?a.w:a.vars.itemWidth,a.visible=Math.floor(a.w/a.itemW),a.move=a.vars.move>0&&a.vars.move<a.visible?a.vars.move:a.visible,a.pagingCount=Math.ceil((a.count-a.visible)/a.move+1),a.last=a.pagingCount-1,a.limit=1===a.pagingCount?0:a.vars.itemWidth>a.w?a.itemW*(a.count-1)+e*(a.count-1):(a.itemW+e)*a.count-a.w-e):(a.itemW=a.w,a.itemM=e,a.pagingCount=a.count,a.last=a.count-1),a.computedW=a.itemW-a.boxPadding,a.computedM=a.itemM},a.canAdvance=function(t,e){var i=m?a.pagingCount-1:a.last;return!!e||(!(!m||a.currentItem!==a.count-1||0!==t||"prev"!==a.direction)||(!(!m||0!==a.currentItem||t!==a.pagingCount-1||"next"===a.direction)||!(t===a.currentSlide&&!m)&&(!!a.vars.animationLoop||(!a.atEnd||0!==a.currentSlide||t!==i||"next"===a.direction)&&(!a.atEnd||a.currentSlide!==i||0!==t||"next"!==a.direction))))},a.flexAnimate=function(n,s,d,c,v){if(a.vars.animationLoop||n===a.currentSlide||(a.direction=n>a.currentSlide?"next":"prev"),m&&1===a.pagingCount&&(a.direction=a.currentItem<n?"next":"prev"),!a.animating&&(a.canAdvance(n,v)||d)&&a.is(":visible")){if(m&&c){var f=t(a.vars.asNavFor).data("flexslider");if(a.atEnd=0===n||n===a.count-1,f.flexAnimate(n,!0,!1,!0,v),a.direction=a.currentItem<n?"next":"prev",f.direction=a.direction,a.currentItem=n,a.slides.removeClass(u+"active-slide").eq(n).addClass(u+"active-slide"),a.currentItem>=a.currentSlide+a.visible)n=a.currentItem-a.visible+1;else{if(!(a.currentItem<a.currentSlide))return!0;n=a.currentItem}}if(a.animating=!0,a.animatingTo=n,s&&a.pause(),a.vars.before(a),o||a.slides.removeClass(u+"active-slide").eq(n).addClass(u+"active-slide"),a.atEnd=0===n||n===a.last,a.vars.directionNav){var g=u+"disabled";1===a.pagingCount?a.directionNav.addClass(g).attr("tabindex","-1"):a.vars.animationLoop?a.directionNav.removeClass(g).removeAttr("tabindex"):0===a.animatingTo?a.directionNav.removeClass(g).filter("."+u+"prev").addClass(g).attr("tabindex","-1"):a.animatingTo===a.last?a.directionNav.removeClass(g).filter("."+u+"next").addClass(g).attr("tabindex","-1"):a.directionNav.removeClass(g).removeAttr("tabindex")}if(n===a.last&&(a.vars.end(a),a.vars.animationLoop||a.pause()),l)e?(a.slides.eq(a.currentSlide).css({opacity:0,zIndex:1}),a.slides.eq(n).css({opacity:1,zIndex:2}),a.wrapup(w)):(a.slides.eq(a.currentSlide).css({zIndex:1}).animate({opacity:0},a.vars.animationSpeed,a.vars.easing),a.slides.eq(n).css({zIndex:2}).animate({opacity:1},a.vars.animationSpeed,a.vars.easing,a.wrapup));else{var h,p,_,w=i?a.slides.filter(":first").height():a.computedW;o?(h=a.vars.itemMargin,p=(_=(a.itemW+h)*a.move*a.animatingTo)>a.limit&&1!==a.visible?a.limit:_):p=0===a.currentSlide&&n===a.count-1&&a.vars.animationLoop&&"next"!==a.direction?r?(a.count+a.cloneOffset)*w:0:a.currentSlide===a.last&&0===n&&a.vars.animationLoop&&"prev"!==a.direction?r?0:(a.count+1)*w:r?(a.count-1-n+a.cloneOffset)*w:(n+a.cloneOffset)*w,a.setProps(p,"",a.vars.animationSpeed),a.transitions?(a.vars.animationLoop&&a.atEnd||(a.animating=!1,a.currentSlide=a.animatingTo),a.container.unbind("webkitTransitionEnd transitionend"),a.container.bind("webkitTransitionEnd transitionend",(function(){clearTimeout(a.ensureAnimationEnd),a.wrapup(w)})),clearTimeout(a.ensureAnimationEnd),a.ensureAnimationEnd=setTimeout((function(){a.wrapup(w)}),a.vars.animationSpeed+100)):a.container.animate(a.args,a.vars.animationSpeed,a.vars.easing,(function(){a.wrapup(w)}))}}},c.calculateProductThumbnailSize(!0),a.css("visibility","inherit"))},start:function(t){var e=0;t.on("wheel",(function(i){if(t.count<=t.visible)return!0;var a,r=i.originalEvent.deltaY,n=(new Date).getTime();return n-e<1e3||(a=r<0?t.getTarget("prev"):t.getTarget("next"),t.flexAnimate(a,t.vars.pauseOnAction),e=n),!1}))}})}},prepareImages:function(t,e){t.the7ImageRatio("update",e)},productInitZoomForCurrentSlide:function(e){if("function"==typeof t.fn.zoom){var i=!!a.hasClass("show-image-zoom-yes"),r=e.slides.eq(e.currentSlide),n=e.computedW;if(r.trigger("zoom.destroy"),!i)return!1;var o=!1;if(t(r).each((function(e,i){if(t(i).find("img").data("large_image_width")>n)return o=!0,!1})),o){var s={touch:!1};"ontouchstart"in document.documentElement&&(s.on="click"),r.zoom(s),setTimeout((function(){r.find(":hover").length&&r.trigger("mouseover")}),100)}}},calculateProductThumbnailSize:function(t){var e=d.data("flexslider");if(void 0===e)return!1;var i=!0,r=a.vars.colNum,n=a.vars.thumbGap,c=d.find(".slides li");a.clearPrecisionSizes();var l=(a.vars.isVertical?s.outerHeight():s.outerWidth())/r-n+n/r;if(l=Math.round(l),c.length<=r&&(i=!1),i?d.removeClass("stop-transition"):d.addClass("stop-transition"),a.vars.isVertical){var u=(l+n)*r-n;d.css({height:u,width:Math.ceil(d.width())}),c.css({height:l}),d.find(".slides").css({height:(l+n)*c.length}),s.css({height:u,width:Math.ceil(o.width())})}else{var m=(l+n)*r-n;d.css({width:m}),s.css({width:m})}var v=s.data("flexslider");return void 0!==v&&(v.doMath(),v.setup(),v.setProps()),t&&(a.updateThumbnailImages(),a.updateGalleryImages(),e.vars.direction=a.vars.scrollMode,e.vars.itemMargin=n,e.vars.directionNav=i,e.vars.itemWidth=l,e.doMath(),e.setup(),e.setProps()),!0},onResetSlidePosition:function(){var t=s.data("flexslider");void 0!==t&&t.flexslider(0,t.vars.pauseOnAction,!1,!0)}},a.clearPrecisionSizes=function(){s.css({width:"",height:""}),a.vars.isVertical?d.css({width:""}):d.css({width:"",height:""})},a.refresh=function(){c.initVars(),c.calculateProductThumbnailSize(!1)&&setTimeout((function(){c.calculateProductThumbnailSize(!0)}),150)},a.updateGalleryImages=function(t){var e=a.hasClass("preserve-gallery-ratio-y");void 0===t&&(t=s.find(".slides li")),c.prepareImages(t,e)},a.updateThumbnailImages=function(t){var e=a.hasClass("preserve-thumb-ratio-y");void 0===t&&(t=d.find(".slides li")),c.prepareImages(t,e)},a.blockRefreshOnce=function(){a.vars.blockedRefresh=!0},c.init()},t.productNavigation=function(e){var i,a=t(e),r=a.find(".the7-product-navigation .img-ratio-wrapper");t.data(e,"productNavigation",a),i={init:function(){r.find("img").the7ImageRatio(),a.refresh(),t(window).on("debouncedresize",(function(){a.refresh()}))}},a.refresh=function(t){var e=a.hasClass("preserve-img-ratio-y");void 0===t&&(t=r),t.the7ImageRatio("update",e)},i.init()},t(document).on("found_variation reset_image","form.cart",(function(i,a){var r=t(this);!function(t,i,a){var r=i.find(".dt-product-gallery"),n=i.find(".dt-product-thumbs .slides"),o=n.find("li:eq(0)"),s=i.data("productGallery");if(t&&t.image&&t.image.src&&t.image.src.length>1){var d=o.find("img"),c=r.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder").eq(0),l=c.find(".wp-post-image"),u=c.find("a").eq(0);e(i);var m=n.find('li img[data-src="'+t.image.full_src+'"]');if(m.length>0)return void 0!==s&&s.blockRefreshOnce(),m.trigger("click"),a.attr("dt-current-image",t.image_id),void window.setTimeout((function(){r.trigger("woocommerce_gallery_init_zoom")}),20);l.wc_set_variation_attr("src",t.image.src),l.wc_set_variation_attr("height",t.image.src_h),l.wc_set_variation_attr("width",t.image.src_w),l.wc_set_variation_attr("srcset",t.image.srcset),l.wc_set_variation_attr("sizes",t.image.sizes),l.wc_set_variation_attr("title",t.image.title),l.wc_set_variation_attr("data-caption",t.image.caption),l.wc_set_variation_attr("alt",t.image.alt),l.wc_set_variation_attr("data-src",t.image.full_src),l.wc_set_variation_attr("data-large_image",t.image.full_src),l.wc_set_variation_attr("data-large_image_width",t.image.full_src_w),l.wc_set_variation_attr("data-large_image_height",t.image.full_src_h),c.wc_set_variation_attr("data-thumb",t.image.src),d.wc_set_variation_attr("srcset",""),d.wc_set_variation_attr("src",t.image.src),d.wc_set_variation_attr("data-src",t.image.full_src),u.wc_set_variation_attr("href",t.image.full_src)}else e(i);void 0!==s&&(s.updateThumbnailImages(o),s.updateGalleryImages(r.find(".slides li:eq(0)")));window.setTimeout((function(){!function(t,e,i){var a=e.find(".dt-product-gallery"),r=t&&t.image_id?t.image_id:"";i.attr("dt-current-image")!==r&&(reset_slide_position=!0);i.attr("dt-current-image",r),reset_slide_position&&a.trigger("woocommerce_gallery_reset_slide_position")}(t,i,a),r.trigger("woocommerce_gallery_init_zoom")}),20)}(a,t(".elementor-widget-the7-woocommerce-product-images"),r)})),t.fn.productGallery=function(){return this.each((function(){"function"==typeof t.fn.flexslider?(void 0!==t(this).data("productGallery")&&t(this).removeData("productGallery"),new t.productGallery(this)):console.error("Cannot initialize productGallery, flexslider library not found!")}))},t.fn.productNavigation=function(){return this.each((function(){"function"==typeof t.fn.the7ImageRatio?(void 0!==t(this).data("productNavigation")&&t(this).removeData("productNavigation"),new t.productNavigation(this)):console.error("Cannot initialize the7ImageRatio, the7-main library not found!")}))},t(window).on("elementor/frontend/init",(function(){function t(t,e,i){var a;return void 0===i&&(i=!1),function(){var r=this,n=arguments;null!==a&&clearTimeout(a),a=window.setTimeout((function(){a=null,i||t.apply(r,n)}),e),i&&!a&&t.apply(r,n)}}elementorFrontend.hooks.addAction("frontend/element_ready/the7-woocommerce-product-images.default",(function(e,i){i(document).ready((function(){e.productGallery();var i=t((function(){var t=e.data("productGallery");void 0!==t&&t.refresh()}),600),a=e.find(".dt-wc-product-gallery"),r=a.width();setInterval((function(){a.width()!==r&&(i(),r=a.width())}),500)}))})),elementorFrontend.hooks.addAction("frontend/element_ready/the7-woocommerce-product-navigation.default",(function(e,i){i(document).ready((function(){e.productNavigation();t((function(){var t=e.data("productNavigation");void 0!==t&&t.refresh()}),600)}))}))}))}(jQuery);